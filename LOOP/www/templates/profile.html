<ion-view title="Profile" hide-back-button="true" ng-init="loadImages()">
    <ion-nav-bar class="bar-balanced"></ion-nav-bar>
    <ion-nav-buttons side="right">
        <button class="button" ui-sref="editProfile">EDIT</button>
    </ion-nav-buttons>
    <ion-content padding="true" class="has-header">
        <ion-list>
            <ion-item style="text-align:center;">
                <div id="profilephoto" ng-click="openModal()" class="cropped-photo">
                    <img style="border-radius: 100%;" ng-src="{{profilePicture}}" width="100px" height="100px">
                </div>
                <a class="button button-clear button-positive" ng-click="openModal()">Change</a><br>
                <h2><b>{{username}}<b></h2>
                <h2><i class="icon ion-arrow-up-a"></i> Height: {{height}} cm</h2>
                <h2><i class="icon ion-speedometer"></i> Weight: {{weight}} kg</h2>
            </ion-item>
        </ion-list>
        <div class="item item-body " id="profile-list-item-container2">
            <p id="profile-markdown4" style="margin-top:0px;color:#000000;" class=" ">
                <strong>Activities</strong>
            </p>
            <ion-list id="profile-list10" class=" ">
                <ion-item class="item-icon-left  " id="profile-list-item10" ui-sref="tabsController.routes.myRoutes">
                    <i class="icon ion-ios-list-outline"></i>{{numActivities}} Tracked</ion-item>
            </ion-list>
            <div class="spacer" style="width: 268px; height: 17px;"></div>
            <p id="profile-markdown5" style="margin-top:0px;color:#000000;" class=" ">
                <strong>Calories</strong>
            </p>
            <ion-list id="profile-list9" class=" ">
                <ion-item class="item-icon-left  " id="profile-list-item11">
                    <i class="icon ion-android-bicycle"></i>{{totalCalories}} Calories Burned</ion-item>
            </ion-list>
        </div>
        <button class="button button-full button-positive" ui-sref="changePassword">Change Password</button>
        <button class="button button-full button-assertive" ng-click="logOut()">Log Out</button>
    </ion-content>
</ion-view>

<script id="my-modal.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar class="bar-balanced">
            <h1 class="title">Select Avatar</h1>
            <button class="button button-clear button-primary" ng-click="closeModal()">Close</button>
        </ion-header-bar>
        <ion-content>
            <div class="row" ng-repeat="image in images" ng-if="$index % 4 === 0">
                <div class="col col-25" ng-if="$index < images.length">
                    <img ng-src="{{images[$index].src}}" width="100%" ng-click="select($index+1)"/>
                </div>
                <div class="col col-25" ng-if="$index + 1 < images.length">
                    <img ng-src="{{images[$index + 1].src}}" width="100%"  ng-click="select($index+2)"/>
                </div>
                <div class="col col-25" ng-if="$index + 2 < images.length">
                    <img ng-src="{{images[$index + 2].src}}" width="100%"  ng-click="select($index+3)"/>
                </div>
                <div class="col col-25" ng-if="$index + 3 < images.length">
                    <img ng-src="{{images[$index + 3].src}}" width="100%"  ng-click="select($index+4)"/>
                </div>
            </div>
        </ion-content>
    </ion-modal-view>
</script>
